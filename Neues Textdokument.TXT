CREATE TABLE Restraint (
  Id INTEGER  NOT NULL  ,
  ShelxName CHAR(4)    ,
  Description VARCHAR(255)      ,
PRIMARY KEY(Id));



CREATE TABLE Fragment (
  Id INTEGER  NOT NULL  ,
  tag VARCHAR(255)    ,
  Reference VARCHAR(255)    ,
  Name TEXT    ,
  comment TEXT      ,
PRIMARY KEY(Id));



CREATE TABLE Atom (
  Id INTEGER  NOT NULL  ,
  FragmentId INTEGER  NOT NULL  ,
  tag VARCHAR(255)    ,
  Name VARCHAR(255)    ,
  element VARCHAR(255)    ,
  x FLOAT    ,
  y FLOAT    ,
  z FLOAT      ,
PRIMARY KEY(Id)  ,
  FOREIGN KEY(FragmentId)
    REFERENCES Fragment(Id)
      ON DELETE CASCADE
      ON UPDATE NO ACTION);



CREATE TABLE FragmentRestraints (
  RestraintId INTEGER  NOT NULL  ,
  FragmentId INTEGER  NOT NULL,
PRIMARY KEY(RestraintId, FragmentId),
  FOREIGN KEY(FragmentId)
    REFERENCES Fragment(Id)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(RestraintId)
    REFERENCES Restraint(Id)
      ON DELETE CASCADE
      ON UPDATE NO ACTION);


CREATE INDEX Fragment_FK ON Atom(FragmentId);
CREATE INDEX Fragment_has_Restraint_FKIndex1 ON FragmentRestraints(FragmentId);
CREATE INDEX Fragment_has_Restraint_FKIndex2 ON FragmentRestraints(RestraintId);



