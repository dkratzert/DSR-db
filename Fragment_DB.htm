<!-- #include tool-top gui/blocks/tool-top.htm;image=#image;onclick=#onclick;1; -->
$SetVar(fdb_chooser, "Choose the desired fragment from the list in the drop-down menu. Do an unsharp search with a partial name and hit enter. For example cf3 finds all the fragments containing cf3 their name.")
$SetVar(fdb_picture, "Displays a picture of the fragment. User defined fragments only have pictures if the user provided one.")
$SetVar(fdb_props, "Define PART, free variables (FVAR) and the occupancy here. A free variable of 3 and an occupancy of 1 means 21.0 in SHELXL notation. All parameters will be displayed in the molecule labels simultaneously.")
$SetVar(fdb_resi, "Define residue number and residue class. The number must be uniq. The plugin automatically chooses the next unused residue number. So it is best to leave it untouched. The residue class has to start with a letter and can be up to four characters. Usually the class provided by the database is sufficient.")
$SetVar(fdb_fit, "~Fit!~ <br> The button *Fit!* starts the fit of the Fragment into the structure. <br>~Reference~<br>The reference field shows the origin of the fragment.<br> ~Edit~ <br>Edit or create new fragments:<br>*Open Picture:* Select a picture for the fragment. Use at least 600dpi pictures.<br>*Name:* Name of the fragment<br>*Unit cell:* cell parameters of the fragment. Use 1 1 1 90 90 90 for cartesian coordinates.<br>*Atoms:* insert atoms here like O2  8  1.3984  -0.3778   0.4922. You can also directly copy atoms from SHELX files.<br>*Use selected atoms:* uses the selected atoms for the Atoms field and creates a picture from the fragment.<br>*Restraints:* type any SHELX compatible restraint here. Each restraint has to be in a new line.<br>*Residue:* Define the residue class of the fragment (only four characters). <br>*Reference* define the origin of the fragment.")

<!-- #include tool-row-help gui/blocks/tool-row-help.htm;name=Fragment_chooser;help_ext=Fragment Chooser;helpTxt=$GetVar(fdb_chooser);1; -->
  <td halign='left' width='16%'>
    <b>%Fragment:%</b> 
  </td>
  <td VALIGN='center' ALIGN='left' colspan=1 width='78%'>
      <input
        type='combo'
        name='LIST_FRAGMENTS'
        width="100%"
        height="$GetVar(HtmlComboHeight)"
        bgcolor="spy.GetParam(gui.html.input_bg_colour)"
        items='spy.FragmentDB.list_fragments()'
        value='select and search fragments here'
        onenter='html.SetValue(~name~, "")'
        onchange="SetVar(fragment_ID, html.GetValue(~name~))>>
                  spy.FragmentDB.init_plugin()"
        onreturn="spy.FragmentDB.search_fragments(html.GetValue(~name~))"
        readonly="False"
        manage="False"
      >
  </td>
  <td align='left' width='20%'>
  <a align='left' href="html.SetItems('LIST_FRAGMENTS', spy.FragmentDB.list_fragments()))"> reset</a>
  </td>
<!-- #include row_table_off gui/blocks/row_table_off.htm;1; -->

<!-- #include tool-row-help gui/blocks/tool-row-help.htm;name=Fragment_picture; help_ext=Fragment picture;helpTxt=$GetVar(fdb_picture);1; -->
  <td width="100%" align="center" >
  <zimg name="FDBMOLEPIC" 
        border="2" 
        src="blank.png" 
        height=100 
        width=100 
        align="center"
  >
  </td>
<!-- #include row_table_off gui/blocks/row_table_off.htm;1; -->


<!-- #include tool-row-help gui\blocks\tool-row-help.htm;name='FRAG_FVAR_1';help_ext=Define Properies;helpTxt=$GetVar(fdb_props);1 -->
  <td width='15%' align='left'><b>%PART:%</b>
  </td>
  <td align='left' width='15%'>
    <font size="$GetVar('HtmlFontSizeControls')">
      <input
        type="spin"
        name="FRAGMENT_PART"
        width="100%"
        height="$GetVar('HtmlSpinHeight')"
        max='99'
        min='-99'
        bgcolor="spy.GetParam(gui.html.input_bg_colour)"
        value="spy.GetParam(fragment_DB.fragment.frag_part)"
        onchange='spy.SetParam(fragment_DB.fragment.frag_part, html.GetValue(~name~))>>labels -p '
      >
    </font>
  </td>

  <td width='25%' align="right"><b>%Free Variable:%</b>
  </td>
  <td align='left' width='15%'>
    <font size="$GetVar('HtmlFontSizeControls')">
      <input
        type="spin"
        name="FRAG_FVAR"
        width="100%"
        height="$GetVar('HtmlSpinHeight')"
        max='99'
        min='-99'
        bgcolor="spy.GetParam(gui.html.input_bg_colour)"
        value="spy.GetParam(fragment_DB.fragment.frag_fvar)"
        onchange='spy.SetParam(fragment_DB.fragment.frag_fvar, html.GetValue(~name~))>>labels -v'
      >
    </font>
  </td>

  <td width='20%' align='right'><b>%Occupancy:%</b>
  </td>
  <td align='right' width='10%'>
    <font size="$GetVar('HtmlFontSizeControls')">
    <input
      type="text"
      height="$GetVar('HtmlInputHeight')"
      width="100%"
      bgcolor="$GetVar('HtmlInputBgColour')"
      name = "FRAG_OCCUPANCY"
      value = "spy.GetParam(fragment_DB.fragment.frag_occ)"
      min='-4'
      max='4'
      onchange='spy.FragmentDB.set_occu(html.GetValue(~name~))>>labels -o'
    >
    </font>
  </td>
<!-- #include row_table_off gui\blocks\row_table_off.htm;1; -->

<!-- #include tool-row-help gui\blocks\tool-row-help.htm;name='Residues';help_ext=Residue definition;helpTxt=$GetVar(fdb_resi);1 -->
  <td width='25%' align='left'>
   <b>%Residue Number:%</b>
  </td>
  <td width='10%' align='left'>
      <font size="$GetVar('HtmlFontSizeControls')">
      <input
        type="spin"
        name="RESIDUE"
        width="100%"
        height="17"
        max='99'
        min='0'
        bgcolor="spy.GetParam(gui.html.input_bg_colour)"
        value="spy.SetParam(fragment_DB.fragment.resinum, spy.FragmentDB.find_free_residue_num())"
        onchange="spy.SetParam(fragment_DB.fragment.resinum, html.GetValue('~name~'))>>labels -rn"
  >
  </td>
  <td width='25%' align='right'>
  <b>%Residue Class:%</b>
  </td>
  <td width='13%' align='right'>
    <font size="$GetVar('HtmlFontSizeControls')">
    <input
      type="text"
      height="$GetVar('HtmlInputHeight')"
      width="100%"
      bgcolor="$GetVar('HtmlInputBgColour')"
      name = "RESIDUE_CLASS"
      value = ""
      onchange='spy.FragmentDB.set_resiclass(html.GetValue(~name~), RESIDUE_CLASS)>>labels -rc'
    >
    </font>
  </td>
  <td width='25%' align='right'>
    <b>%Use DFIX:%</b>
  </td>
    <td halign='left' width='5%'>
    $+
    html.Snippet("gui/snippets/input-checkbox",
    "name=dfixornot",
    "checked=spy.GetParam('fragment_DB.fragment.use_dfix')",
    "onclick=spy.SetParam('fragment_DB.fragment.use_dfix', html.GetState('~name~'))"
    )
    $-
  </td>
<!-- #include row_table_off gui\blocks\row_table_off.htm;1; -->


<!-- #include tool-row-help gui/blocks/tool-row-help.htm;name=Buttons; help_ext=Fit the Fragment;helpTxt=$GetVar(fdb_fit);1; -->
  <td width='35%' align='left'>
    $spy.MakeHoverButton('small-Fit!@bitmap', 'spy.FragmentDB.fit_db_fragment()>>html.SetItems('LIST_FRAGMENTS', spy.FragmentDB.list_fragments())')
    &nbsp;
    $spy.MakeHoverButton('small-Edit@bitmap', 'spy.FragmentDB.open_edit_fragment_window()')
  </td>
  <td width='20%' align='right'>Reference:</td>
  <td width='45' align="right"><font color="black"> 
    <input
    type="text" 
    name="REFERENCE"
    height="$GetVar('HtmlInputHeight')"
    value=""
    bgcolor="$GetVar(HtmlTableBgColour)"
    fgcolor="$GetVar(HtmlFontColour)"
    width="100%" />
  </font>
  </td>

<!-- #include row_table_off gui/blocks/row_table_off.htm;1; -->



<!-- #include tool-footer gui/blocks/tool-footer.htm;colspan=2;1; -->


