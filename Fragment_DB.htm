
<!-- #include tool-top gui/blocks/tool-top.htm;image=#image;onclick=#onclick;1; -->

<!-- #include tool-row-help gui/blocks/tool-row-help.htm;name=Fragment_chooser;help_ext=Fragment_Chooser;1; -->

  $+
    html.Snippet("gui/snippets/input-combo-td",
    "name=LIST_FRAGMENTS",
    "value='select or search fragments here'",
    "items=spy.FragmentDB.list_fragments()",
    "onenter=html.SetValue(~name~, '')",
    "onchange=spy.FragmentDB.set_id(html.GetValue(~name~))>>spy.FragmentDB.init_plugin()",
    "onreturn=spy.FragmentDB.search_fragments(html.GetValue(~name~))",
    "readonly=False",
    "td1=<td width='85%'>"
    )
  $-

  $+
    html.Snippet(GetVar(default_link),
    "value=reset",
    "name=RESET_BUTTON",
    "onclick=spy.fragmentDB.clear_mainvalues()",
    "td1=<td width='12%'>"
    )
  $-

<!-- #include row_table_off gui/blocks/row_table_off.htm;1; -->


<!-- #include tool-row-help gui/blocks/tool-row-help.htm;name=Fragment_picture;help_ext=Picture;1; -->

  <td width="90%" align="center">
    <a target="" href="spy.FragmentDB.display_large_image()">
      $spy.fragmentdb.imagedisp('FDBMOLEPIC')
    </a>
  </td>

<!-- #include row_table_off gui/blocks/row_table_off.htm;1; -->


<!-- #include tool-row-help gui\blocks\tool-row-help.htm;name='FRAG_FVAR_1';help_ext=Properies;1 -->

  <td align='right' width="10%"><b>PART:</b></td>
    $+
      html.Snippet("gui/snippets/input-spin-td",
      "name=FRAGMENT_PART",
      "value=spy.GetParam(fragment_DB.fragment.frag_part)",
      "min=-99",
      "max=99",
      "onchange=spy.SetParam(fragment_DB.fragment.frag_part, html.GetValue(~name~))>>labels -p",
      "td1=<td width='12%'>"
      )
    $-

  <td align="right" width="21%"><b>Free Variable:</b></td>
    $+
      html.Snippet("gui/snippets/input-spin-td",
      "name=FRAG_FVAR",
      "value=spy.GetParam(fragment_DB.fragment.frag_fvar)",
      "min=-99",
      "max=99",
      "onchange=spy.SetParam(fragment_DB.fragment.frag_fvar, html.GetValue(~name~))>>labels -v>>spy.FragmentDB.get_fvar_occ()",
      "td1=<td width='12%'>"
      )
    $-

  <td align='right'><b>Occupancy:</b></td>
    $+
      html.Snippet("gui/snippets/input-text-td",
      "name=FRAG_OCCUPANCY",
      "value=spy.GetParam(fragment_DB.fragment.frag_occ)",
      "min=-4",
      "max=4",
      "onchange=spy.FragmentDB.set_occu(html.GetValue(~name~))>>labels -o>>spy.FragmentDB.get_fvar_occ()",
      "td1=<td width='11%'>"
      )
    $-

  <td><b>=></b><td>
    $+
      html.Snippet("gui/snippets/input-text-td",
      "name=FVAROCC",
      "value=spy.GetParam('fragment_DB.fragment.fvarocc')",
      "onchange=spy.FragmentDB.set_resiclass(html.GetValue(~name~), RESIDUE_CLASS)>>labels -rc",
      "td1=<td width='11%'>"
      )
    $-

<!-- #include row_table_off gui\blocks\row_table_off.htm;1; -->


<!-- #include tool-row-help gui\blocks\tool-row-help.htm;name='Residues';help_ext=Properies_2;1 -->

  <td align='right' width="17%"><b>Use a residue:</b></td>
    $+
      html.Snippet("gui/snippets/input-checkbox-td",
      "name=RESIDUE",
      "checked=spy.GetParam(fragment_DB.fragment.resitoggle)",
      "onclick=spy.SetParam('fragment_DB.fragment.resitoggle', html.GetState('~name~'))",
      "td1=<td align='left' width="6%">"
      )
    $-
  
  <td align='right' width="20%"><b>Residue Class:</b></td>
    $+
      html.Snippet("gui/snippets/input-text-td",
      "name=RESIDUE_CLASS",
      "value=spy.GetParam('fragment_DB.fragment.resi_class')",
      "onchange=spy.FragmentDB.set_resiclass(html.GetValue(~name~), RESIDUE_CLASS)>>labels -rc",
      "td1=<td width='12%' halign=left>"
      )
    $-
  
  <td align='right' width="12%"><b>Invert:</b></td>
    $+
      html.Snippet("gui/snippets/input-checkbox-td",
      "name=invert",
      "checked=spy.GetParam('fragment_DB.fragment.invert')",
      "onclick=spy.SetParam('fragment_DB.fragment.invert', html.GetState('~name~'))",
      "td1=<td align='left' width="5%">"
      )
    $-
  
  <td align='right' width="20%"><b>Calculate DFIX:</b></td>
    $+
      html.Snippet("gui/snippets/input-checkbox-td",
      "name=dfixornot",
      "checked=spy.GetParam('fragment_DB.fragment.use_dfix')",
      "onclick=spy.SetParam('fragment_DB.fragment.use_dfix', html.GetState('~name~'))",
      "td1=<td align='left' width="5%">"
      )
    $-

<!-- #include row_table_off gui\blocks\row_table_off.htm;1; -->


<!-- #include tool-row-help gui/blocks/tool-row-help.htm;name=Buttons;help_ext=Fit;1; -->

  $+
    html.Snippet(GetVar(default_link),
    "value=Fit!",
    "name=FIT_BUTTON",
    "onclick=spy.FragmentDB.fit_db_fragment()",
    "td1=<td align='left' width='13%'>"
    )
  $-
  $+
    html.Snippet(GetVar(default_link),
    "value=Edit",
    "name=EDIT_BUTTON",
    "onclick=spy.FragmentDB.open_edit_fragment_window()",
    "td1=<td align='left' width='13%'>"
    )
  $-

  <td align='right' width="18%"><b>No Restraints:</b></td>
    $+
    html.Snippet("gui/snippets/input-checkbox-td",
    "name=ROFF",
    "checked=spy.GetParam('fragment_DB.fragment.roff')",
    "onclick=spy.SetParam('fragment_DB.fragment.roff', html.GetState('~name~'))",
    "td1=<td align='left' width="5%">"
    )
    $-

  <td align='right' width="18%"><b>Rigid Group:</b></td>
    $+
    html.Snippet("gui/snippets/input-checkbox-td",
    "name=RIGID",
    "checked=spy.GetParam('fragment_DB.fragment.rigid')",
    "onclick=spy.SetParam('fragment_DB.fragment.rigid', html.GetState('~name~'))",
    "td1=<td align='left' width="5%">"
    )
    $-

  <td align='right' width="20%"><b>Replace Mode:</b></td>
    $+
      html.Snippet("gui/snippets/input-checkbox-td",
      "name=REPLACE",
      "checked=spy.GetParam('fragment_DB.fragment.replace')",
      "onclick=spy.SetParam('fragment_DB.fragment.replace', html.GetState('~name~'))",
      "td1=<td align='left' width="5%">"
      )
    $-

<!-- #include row_table_off gui/blocks/row_table_off.htm;1; -->


<!-- #include tool-row-help gui/blocks/tool-row-help.htm; help_ext=Results;1; -->
  <tr>
    <td align='left'><b>List of most disagreeable restraints:</b></td>
    $+
      html.Snippet(GetVar(default_link),
      "value=Short",
      "name=SHORT_BUTTON",
      "onclick=delins more>>addins more -1>>refine 4",
      "td1=<td width='13%' align='right'>"
      )
    $-
    $+
      html.Snippet(GetVar(default_link),
      "value=Full",
      "name=FULL_BUTTON",
      "onclick=delins more>>addins more -4>>refine 4",
      "td1=<td width='13%' align='right'>"
      )
    $-
  </tr>
  $spy.FragmentDB.results()

<!-- #include row_table_off gui/blocks/row_table_off.htm;1; -->

<!-- #include tool-footer gui/blocks/tool-footer.htm;colspan=2;1; -->


