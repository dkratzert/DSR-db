<!-- #include tool-top gui/blocks/tool-top.htm;image=#image;onclick=#onclick;1; -->



<!-- #include tool-row-help gui/blocks/tool-row-help.htm;name=FragmentDB_1; help_ext=FragmentDB_1;1; -->
  <td halign='left' width='100%'>
    <a>Choose a fragment and define its properties. Then fit it to the structure.</a>
  </td>
<!-- #include row_table_off gui/blocks/row_table_off.htm;1; -->

<!-- #include tool-row-help gui/blocks/tool-row-help.htm;name=FragmentDB_2; help_ext=FragmentDB_2;1; -->
  <td halign='left' width='15%'>
    <b>%Fragment:%</b> 
  </td>
  <td>
    $+
    html.Snippet("gui/snippets/input-combo",
    "name=LIST_FRAGMENTS",
    "items=spy.FragmentDB.list_fragments()",
    "value=",
    "width=80%",
    "onchange=SetVar(fragment_ID, html.GetValue(~name~))>>spy.FragmentDB.get_resi_class()
        >>spy.FragmentDB.set_fragment_picture(FDBMOLEPIC, 100, 'FragmentDB')",
    "readonly=false",
    "manage=true")
    $-
  </td>
<!-- #include row_table_off gui/blocks/row_table_off.htm;1; -->

<!-- #include tool-row-help gui/blocks/tool-row-help.htm;name=FragmentDB_1a; help_ext=FragmentDB_1a;1; -->
  <td width="100%" align="center" >
  <zimg name="FDBMOLEPIC" 
        border="2" 
        src="blank.png" 
        height=100 
        width=100 
        align="center"
  >
  </td>
<!-- #include row_table_off gui/blocks/row_table_off.htm;1; -->


<!-- #include tool-row-help gui\blocks\tool-row-help.htm;name='FRAG_FVAR_1';help_ext=Frag-FVAR-1;1 -->
  <td width='20%'><b>%Part:%</b></td>
  <td align='left' width='15%'>
    <font size="$GetVar('HtmlFontSizeControls')">
      <input
        type="spin"
        name="FRAGMENT_PART"
        width="50"
        height="17"
        max='99'
        min='-99'
        bgcolor="spy.GetParam(gui.html.input_bg_colour)"
        value="spy.GetParam(fragment_DB.fragment.frag_part)"
        onchange='spy.SetParam(fragment_DB.fragment.frag_part, html.GetValue(~name~))>>labels -p '
      >
    </font>
  </td>

  <td width='25%' align="right"><b>%Free variable:%</b></td>
  <td align='left' width='15%'>
    <font size="$GetVar('HtmlFontSizeControls')">
      <input
        type="spin"
        name="FRAG_FVAR"
        width="40"
        height="15"
        max='99'
        min='-99'
        bgcolor="spy.GetParam(gui.html.input_bg_colour)"
        value="spy.GetParam(fragment_DB.fragment.frag_fvar)"
        onchange='spy.SetParam(fragment_DB.fragment.frag_fvar, html.GetValue(~name~))>>labels -v'
      >
    </font>
  </td>

  <td width='15%'><b>%Occupancy:%</b></td>
  <td align='right' width='10%'>
    <font size="$GetVar('HtmlFontSizeControls')">
    <input
      type="text"
      height="$GetVar('HtmlInputHeight')"
      width="40"
      bgcolor="$GetVar('HtmlInputBgColour')"
      name = "FRAG_OCCUPANCY"
      value = "spy.GetParam(fragment_DB.fragment.frag_occ)"
      min='-4'
      max='4'
      onchange='spy.FragmentDB.set_occu(html.GetValue(~name~))'
    >
    </font>
  </td>
<!-- #include row_table_off gui\blocks\row_table_off.htm;1; -->

<!-- #include tool-row-help gui\blocks\tool-row-help.htm;name='FRAG_RESI_1';help_ext=Frag-Resi-1;1 -->
  <td width='40%' align='left'>
   <b>%Residue number (must be uniq):%</b>
  </td>
  <td width='10%' align='left' align='left'>
      <font size="$GetVar('HtmlFontSizeControls')">
      <input
        type="spin"
        name="RESIDUE"
        width="50"
        height="17"
        max='99'
        min='0'
        bgcolor="spy.GetParam(gui.html.input_bg_colour)"
        value="spy.SetParam(fragment_DB.fragment.resinum, spy.FragmentDB.find_free_residue_num())"
        onchange="spy.SetParam(fragment_DB.fragment.resinum, html.GetValue('~name~'))"
  >
  <td width='50%' align='right'>
  <b>%Residue Class (4 character):%</b>
  </td>
  <td width='10%' align='left'>
    <font size="$GetVar('HtmlFontSizeControls')">
    <input
      type="text"
      height="$GetVar('HtmlInputHeight')"
      width="40"
      bgcolor="$GetVar('HtmlInputBgColour')"
      name = "RESIDUE_CLASS"
      value = "spy.SetParam(fragment_DB.fragment.resi_class, spy.FragmentDB.get_resi_class())"
      onchange='spy.FragmentDB.set_resiclass(html.GetValue(~name~))
            >>html.SetValue(~name~, spy.GetParam(fragment_DB.fragment.resi_class))'
  >
    </font>
  </td>
  </td>
<!-- #include row_table_off gui\blocks\row_table_off.htm;1; -->


<!-- #include tool-row-help gui/blocks/tool-row-help.htm;name=FragmentDB_3; help_ext=FragmentDB_3;1; -->
  <td width='10%' align='left'>
    $spy.MakeHoverButton('small-Go!@bitmap','spy.FragmentDB.fit_db_fragment()')
  </td>
  <td width='50%' align="right">
      <font color="red">
      <input 
        type="label" 
        name="errormessage" 
        />
      </font>
  </td>
      <!-- olx.html.SetValue('errormessage', "Error") -->
<!-- #include row_table_off gui/blocks/row_table_off.htm;1; -->

<!-- #include tool-row-help gui/blocks/tool-row-help.htm;name=FragmentDB_4; help_ext=FragmentDB_4;1; -->
  <td width='30%' align='left'>
    <a href="spy.FragmentDB.open_edit_fragment_window()" type="button" target="Input/Edit fragment">Input/Edit fragment</a>
  </td>
<!-- #include row_table_off gui/blocks/row_table_off.htm;1; -->




<!-- #include tool-footer gui/blocks/tool-footer.htm;colspan=2;1; -->


